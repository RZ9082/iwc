- doc: Test outline for mgnify-amplicon-pipeline-rrna-prediction.ga
  job:
    Processed sequences:
      class: Collection
      collection_type: list
      elements:
      - class: File
        identifier: DRR010481_FASTQ.fasta
        path: test-data/sequences/DRR010481_FASTQ.fasta
      - class: File
        identifier: ERR2715528_MERGED_FASTQ.fasta
        path: test-data/sequences/ERR2715528_MERGED_FASTQ.fasta
    Clan information file:
      class: File
      path: test-data/ribo.claninfo
    Covariance models:
      class: File
      location: "ftp://ftp.ebi.ac.uk/pub/databases/metagenomics/pipeline-5.0/ref-dbs/rfam_models/ribosomal_models/ribo.cm"
  outputs:
    LSU_SSU_BED:
      element_tests:
        DRR010481_FASTQ.fasta:
          path: test-data/LSU_SSU_BED/DRR010481_FASTQ.fasta.bed
          compare: diff
          lines_diff: 0
        ERR2715528_MERGED_FASTQ.fasta:
          path: test-data/LSU_SSU_BED/ERR2715528_MERGED_FASTQ.fasta.bed
          compare: diff
          lines_diff: 0     
    SSU_BED:
      element_tests:
        ERR2715528_MERGED_FASTQ.fasta:
          path: test-data/SSU_BED/ERR2715528_MERGED_FASTQ.fasta.bed
          compare: diff
          lines_diff: 0
        DRR010481_FASTQ.fasta:
          path: test-data/SSU_BED/DRR010481_FASTQ.fasta.bed
          compare: diff
          lines_diff: 0
    LSU_BED:
      element_tests:
        ERR2715528_MERGED_FASTQ.fasta:
          path: test-data/LSU_BED/ERR2715528_MERGED_FASTQ.fasta.bed
          compare: diff
          lines_diff: 0
        DRR010481_FASTQ.fasta:
          path: test-data/LSU_BED/DRR010481_FASTQ.fasta.bed
          compare: diff
          lines_diff: 0
    SSU_FASTA:
      element_tests:
        ERR2715528_MERGED_FASTQ.fasta:
          path: test-data/SSU_FASTA/ERR2715528_MERGED_FASTQ.fasta.fasta
          compare: contains
    LSU_FASTA:
      element_tests:
        DRR010481_FASTQ.fasta:
          path: test-data/LSU_FASTA/DRR010481_FASTQ.fasta.fasta
          compare: contains
    Classifications_SSU_SILVA:
      element_tests:
        ERR2715528_MERGED_FASTQ.fasta:
          asserts:
            - that: has_text
              text: "# mapseq v1.2.6 (Jan 20 2023)"
            - that: has_text
              text: "SILVA"
            - that: has_n_columns
              comment: "#"
              n: 15
    OTU_SSU_SILVA:
      element_tests:
        ERR2715528_MERGED_FASTQ.fasta:
          asserts:
            - that: has_text
              text: "# Constructed from biom file"
            - that: has_text
              text: "# OTU ID"
            - that: has_text
              text: "Unspecified"
            - that: has_text
              text: "taxonomy"
            - that: has_text
              text: "taxid"
            - that: has_n_columns
              comment: "#"
              n: 4
    OTU_LSU_SILVA:
      element_tests:
        DRR010481_FASTQ.fasta:
          asserts:
            - that: has_text
              text: "# Constructed from biom file"
            - that: has_text
              text: "# OTU ID"
            - that: has_text
              text: "Unspecified"
            - that: has_text
              text: "taxonomy"
            - that: has_text
              text: "taxid"
            - that: has_n_columns
              comment: "#"
              n: 4
    Classifications_LSU_SILVA:
      element_tests:
        DRR010481_FASTQ.fasta:
          asserts:
            - that: has_text
              text: "# mapseq v1.2.6 (Jan 20 2023)"
            - that: has_text
              text: "SILVA"
            - that: has_n_columns
              comment: "#"
              n: 15
    HDF5_SSU_SILVA:
      element_tests:
        ERR2715528_MERGED_FASTQ.fasta:
          asserts:
            - that: has_size
              value: 37000
              delta: 10000
    JSON_SSU_SILVA:
      element_tests:
        ERR2715528_MERGED_FASTQ.fasta:
          asserts:
            - that: has_text
              text: "\"type\": \"OTU table\""
    Krona_SSU_SILVA:
      asserts:
            - that: has_text
              text: "ERR2715528_MERGED_FASTQ_fasta"
    HDF5_LSU_SILVA:
      element_tests:
        DRR010481_FASTQ.fasta:
          asserts:
            - that: has_size
              value: 37000
              delta: 10000
    JSON_LSU_SILVA:
      element_tests:
        DRR010481_FASTQ.fasta:
          asserts:
            - that: has_text
              text: "\"type\": \"OTU table\""
    Krona_LSU_SILVA:
      asserts:
            - that: has_text
              text: "DRR010481_FASTQ_fasta"